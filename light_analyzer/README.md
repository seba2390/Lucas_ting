# Light Loss Analyzer\n\nThis application allows users to analyze light propagation through structures by analyzing top-down images.\n\n## Functionality\n\n1.  **Load Image:** Load a top-down image (e.g., PNG, JPG) showing light propagating from left to right.\n2.  **Zoom/Pan:** Use +/- buttons or scroll wheel (platform dependent) to zoom. Use scrollbars to pan the image.\n3.  **Select Region of Interest (ROI):** Draw a rectangular ROI on the image canvas.\n4.  **Enter Length:** Specify the physical length corresponding to the width of the ROI.\n5.  **Analyze:** The application calculates the light intensity profile along the ROI by **summing** pixel values vertically. It then fits an exponential decay function \( I(x) = I_0 e^{-\\alpha x} \) to this profile using non-linear least squares (`curve_fit`) with constraints ensuring positive \(I_0\) and \(\alpha\). A preliminary log-linear fit on the initial decay segment is used to provide a robust starting guess for \(\alpha\).\n6.  **Display Results:** The calculated loss coefficient (\(\alpha\)), initial intensity (\(I_0\)), and R-squared (\(R^2\)) are displayed.\n7.  **Plot:** A plot shows the raw summed intensity data, a smoothed version for visualization, and the fitted exponential curve.\n8.  **Feedback:** Detailed feedback is provided in the side panel, offering suggestions if the fit quality is poor (low R²) or if other potential issues like noise or low decay are detected.\n\n## Installation\n\n1.  Clone the repository.\n2.  Navigate to the project directory.\n3.  (Recommended) Create and activate a virtual environment:\n    ```bash\n    python -m venv venv\n    source venv/bin/activate  # On Windows use `venv\\Scripts\\activate`\n    ```\n4.  Install the required Python packages:\n    ```bash\n    pip install -r light_analyzer/requirements.txt\n    ```\n\n## Usage\n\n1.  Navigate to the directory *containing* the `light_analyzer` folder.\n2.  Run the application using the module flag (`-m`):\n    ```bash\n    python -m light_analyzer.main\n    ```\n3.  (Optional) Set a default image path in `light_analyzer/config.py`.\n4.  Use the GUI: Load image, Zoom/Pan, Select ROI, Enter Length, Analyze.\n5.  Review the numerical results, plot, and feedback panel.\n\n## Project Structure\n\n```\nlight_analyzer/\n├── main.py           # Entry point\n├── app.py            # Main Application class (GUI)\n├── image_canvas.py   # Canvas logic (display, zoom, ROI)\n├── analysis.py       # Data processing and fitting\n├── plotter.py        # Matplotlib plotting logic\n├── info_system.py    # Feedback generation logic\n├── config.py         # Configuration constants\n├── requirements.txt  # Dependencies\n└── README.md         # This file\n```
